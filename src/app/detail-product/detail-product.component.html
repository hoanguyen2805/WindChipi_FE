<app-header></app-header>
<ng-container *ngIf="!khongco">
    <p class="khongco">Không tìm thấy sản phẩm!</p>
</ng-container>
<main *ngIf="khongco">
    <section class="section-detail">
        <div class="container_w">
            <div class="row_w">
                <div class="col_w">
                    <div class="hang">
                        <div class="cot1">
                            <div class="cot">
                                <img [src]="product.images" alt="Nature" style="width:100%"
                                    (click)="myFunction($event);">
                            </div>
                            <div class="cot">
                                <img [src]="product.images2" alt="Snow" style="width:100%"
                                    (click)="myFunction($event);">
                            </div>
                            <div class="cot">
                                <img [src]="product.images3" alt="Mountains" style="width:100%"
                                    (click)="myFunction($event);">
                            </div>
                        </div>
                        <div class="cot2">
                            <img id="expandedImg" style="width:100%; max-height: 800px; object-fit: cover;"
                                [src]="product.images">
                        </div>
                    </div>
                </div>
                <div class="col_w">
                    <div class="info">
                        <p>{{product.name}}</p>
                        <p>{{product.price | number: '2.'}}<span>đ</span></p>
                        <hr>
                        <form (ngSubmit)="order();" [formGroup]="formOrder">
                            <div class="radio-toolbar">
                                <span style="font-size: 1.5rem; font-weight: 500;">SIZE: </span>
                                &nbsp;
                                <input type="radio" formControlName="size" id="radioS" name="size" value="S" checked>
                                <label for="radioS">S</label>
                                &nbsp;
                                <input type="radio" formControlName="size" id="radioM" name="size" value="M">
                                <label for="radioM">M</label>
                                &nbsp;
                                <input type="radio" formControlName="size" id="radioL" name="size" value="L">
                                <label for="radioL">L</label>
                                &nbsp;
                                <input type="radio" formControlName="size" id="radioXL" name="size" value="XL">
                                <label for="radioXL">XL</label>
                                &nbsp;
                                <input type="radio" formControlName="size" id="radioXXL" name="size" value="XXL">
                                <label for="radioXXL">XXL</label>
                            </div>
                            <hr>
                            <p style="font-size: 1.5rem;">Hiện tại còn {{product.total}} sản phẩm.</p>
                            <input type="button" class="nut" (click)="giam()" value="-">
                            <input type="number" readonly formControlName="so_luong">
                            <input type="button" class="nut" (click)="tang()" value="+">
                        </form>

                        <button class="mua den" (click)="addCart()">
                            THÊM VÀO GIỎ
                        </button>
                        <button class="mua do" type="submit" (click)="order()">
                            MUA NGAY
                        </button>
                        <p class="describe">{{product.describe}}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="featured-products">
        <div class="container_w">
            <div class="featured-products__title">
                <p>SẢN PHẨM LIÊN QUAN
                </p>
            </div>
            <div class="row_w">
                <div class="col_w" *ngFor="let item of relatedProducts">
                    <a href="/detail-product/{{item.id}}">
                        <div class="featured-product__img">
                            <img [src]="item.images" alt="" width="100%">
                            <div class="overlay">
                                <p>{{item.name}}</p>
                                <p>{{item.price | number: '2.'}}<span>đ</span></p>
                                <button>Chi tiết</button>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="section-comment">
        <div class="container_w" style="font-size: 1.5rem; margin-top: 50px; margin-bottom: 50px;">
            <tabset>
                <tab heading="Bình Luận" id="tab1">
                    <div class="comment" *ngFor="let comment of comments">
                        <img src="../../assets/images/img_avatar.png" alt="Avatar" class="avatar">
                        <div class="comment__content">
                            <div>
                                <h4>{{comment.username}}</h4>
                                <span>{{comment.date_created}}</span>
                            </div>
                            <p>{{comment.comment_content}}</p>
                        </div>
                    </div>
                </tab>
                <tab heading="Thêm Bình Luận">
                    <div class="save_comment">
                        <textarea id="content" rows="5" #content></textarea>
                        <button (click)="saveComment(content.value)" class="btn btn-danger"
                            style="font-size: 1.5rem;">Gửi Bình Luận</button>
                    </div>
                </tab>
            </tabset>
        </div>
    </section>
</main>